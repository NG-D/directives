angular.module("directive",[]).directive("placeholder",function(){return{restrict:"A",require:"?ngModel",link:function(k,g,h,a){try{var i="<style>.placeholder-style{color: gray;}</style>";if(angular.element(".placeholder-style").length===0){angular.element("head").append(i)}var b=function(m,e){var n=window.navigator.userAgent.toLowerCase(),l;if(n.indexOf("msie")!==-1){var o=n.match(/msie\s([0-9]*)/);l=(arguments.length===0)?o[1]:(arguments.length===1)?(parseInt(o[1])===m):(o[1]>=m&&o[1]<=e)?o[1]:false}return l};if(b(8,9)){if(!a.$modelValue&&a.$modelValue!==false&&a.$modelValue!==0){g.val(h.placeholder);g.addClass("placeholder-style")}try{a.$setViewValue()}catch(c){}if(h.type==="password"){g.removeClass("placeholder-style");var d=new Date().getTime();g.after('<input id="'+d+'" type="text" value="'+h.placeholder+'" autocomplete="off" style="'+h.style+'" class="'+h.class+' placeholder-style" />');var f=angular.element("#"+d);f.show();g.hide();f.focus(function(){f.hide();g.show();g.focus()})}var j=false;g.on("focus",function(){j=true;if(h.type==="password"){if(!a.$modelValue){g.val("")}}else{g.removeClass("placeholder-style");if(g.val()===h.placeholder&&(!a.$modelValue||a.$modelValue===h.placeholder)){g.val("")}}});g.on("blur",function(){j=false;if(h.type==="password"){if(g.val()===""){f.show();g.hide()}}else{if(!g.val()&&!a.$modelValue){g.val(h.placeholder);g.addClass("placeholder-style")}}});k.$watch(function(){return a.$modelValue},function(e){if(e){g.removeClass("placeholder-style")}else{if(j===false){g.val(h.placeholder);g.addClass("placeholder-style")}}})}}catch(c){}}}});